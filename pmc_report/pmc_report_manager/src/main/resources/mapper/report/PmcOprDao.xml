<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gean.pmc_report_manager.modules.report.dao.PmcOprDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="gean.pmc_report_manager.modules.report.entity.PmcOprEntity" id="pmcOprMap">
        <result property="shop" column="shop"/>
        <result property="line" column="line"/>
        <result property="zone" column="zone"/>
        <result property="station" column="station"/>
        <result property="equipment" column="equipment"/>
        <result property="facilityId" column="facility_id"/>
        <result property="startTime" column="start_time"/>
        <result property="endTime" column="end_time"/>
        <result property="availableTime" column="available_time"/>
        <result property="productionVolume" column="production_volume"/>
        <result property="frequency" column="frequency"/>
        <result property="workingday" column="workingDay"/>
        <result property="levels" column="levels"/>
        <result property="shift" column="shift"/>
        <result property="tarOpr" column="tar_opr"/>
        <result property="designCycleTime" column="design_cycle_time"/>
        <result property="productionOpr" column="production_opr"/>
    </resultMap>
    
    <sql id="Base_column_Opr">
    	shop,line,zone,station,equipment,facility_id,start_time,end_time,available_time,
    	production_volume,frequency,workingday,levels,shift,tar_opr,design_cycle_time,production_opr
    </sql>
    
    <resultMap type="gean.pmc_report_manager.modules.report.vo.OprReportVo" id="oprReportMap">
    	<result property="oprTarget" column="tar_opr"/>
    	<result property="eOpr" column="e_opr"/>
    	<result property="productionVolume" column="production_volume"/>
    	<result property="availableTime" column="available_time"/>
    	<result property="popr" column="production_opr"/>
    	<result property="workingDay" column="workingDay"/>
    	<result property="role" column="frequency"/>
    </resultMap>
	
	<select id="queryOprByParam" resultMap="pmcOprMap">
		SELECT
			<include refid="Base_column_Opr"/>
		FROM
			PMC_OPR p
		WHERE 1 = 1
		<if test="shop!=null and shop!=''">
			AND p.shop =#{shop}
		</if>
		<if test="frequency!=null and frequency!=''">
			AND p.frequency =#{frequency}
		</if>
		<if test="line!=null and line!=''">
			AND p.line =#{line}
		</if>
		<if test="zone!=null and zone!=''">
			AND p. ZONE =#{zone}
		</if>
		<if test="shift!=null and shift!=''">
			AND p.shift =#{shift}
		</if>
		<if test="startTime!=null and startTime!=''">
			AND p.start_time &gt;=CONVERT (datetime,'#{startTime}',21)
		</if>
		<if test="endTime!=null and endTime!=''">
			AND p.end_time &lt;=CONVERT (datetime,'#{endTime}',21)
		</if>
	</select>

</mapper>