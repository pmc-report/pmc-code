<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="gean.pmc_report_manager.modules.report.dao.TaBiw3OprDao">

	<!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="gean.pmc_report_manager.modules.report.entity.TaBiw3OprEntity" id="taBiw3OprMap">
        <result property="rowId" column="row_id"/>
        <result property="dbTimeStamp" column="db_time_stamp"/>
        <result property="shop" column="shop"/>
        <result property="area" column="area"/>
        <result property="zone" column="zone"/>
        <result property="equipment" column="equipment"/>
        <result property="facilityDesc" column="facility_desc"/>
        <result property="station" column="station"/>
        <result property="jobId" column="job_id"/>
        <result property="startTime" column="start_time"/>
        <result property="endTime" column="end_time"/>
        <result property="duration" column="duration"/>
        <result property="actualEquipmentOpr" column="actual_equipment_opr"/>
        <result property="actualProductionOpr" column="actual_production_opr"/>
        <result property="targetEquipmentOpr" column="target_equipment_opr"/>
        <result property="targetProductionOpr" column="target_production_opr"/>
        <result property="productionVolume" column="production_volume"/>
        <result property="oprLevel" column="opr_level"/>
        <result property="frequency" column="frequency"/>
        <result property="shift" column="shift"/>
        <result property="tavFlag" column="tav_flag"/>
        <result property="historical" column="historical"/>
        <result property="workDay" column="work_day"/>
        <result property="facilityId" column="facility_id"/>
        <result property="downtime" column="downtime"/>
    </resultMap>
    
    <sql id="common_sql">
    	select * from BIW3.dbo.Final_BIW3_OPR o where 1 = 1
    </sql>
    <select id="qureyOPRList" resultMap="taBiw3OprMap">
    	<include refid="common_sql"/>
    	<if test="shop!=null and shop!=''">
    		AND shop  = #{shop}
    	</if>
    	<if test="area!=null and area!=''">
			AND area = #{area}
		</if>
		<if test="shift!=null and shift!=''">
			AND shift = #{shift}
		</if>
		<if test="startTime!=null">
			AND work_day = CONVERT(datetime2,#{startTime},121)
		</if>
    </select>
</mapper>